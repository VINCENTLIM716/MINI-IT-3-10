{% extends 'base.html' %}

{% block content %}
<div class="profile-container">
    <div class="profile-header">
        <img src="{{ url_for('static', filename='avatars/' + (user.avatar if user.avatar else './default_avatar.png')) }}" alt="Avatar" class="avatar" width="120" height="120">
        <div class="profile-info">
            <h1>{{ user.name }}</h1>
            <p><i class="fas fa-birthday-cake"></i> Birthday: {{ user.birthday }}</p>
            <p><i class="fas fa-hourglass-half"></i> Age: {{ user.age }}</p>
            <p><i class="fas fa-user"></i> About Me: {{ user.description }}</p>
        </div>
    </div>

    <hr>

    <div class="profile-section">
        <h2><i class="fas fa-list-check"></i> Habit Overview</h2>
        <ul>
            <li><strong>Total Habits:</strong> {{ total_habits }}</li>
            <li><strong>Completed Streak:</strong> {{ max_streak }} days</li>
            <li><strong>Current Level:</strong> {{ user.level }}</li>
        </ul>
    </div>

    <div class="profile-section">
        <h2><i class="fas fa-medal"></i> Badges</h2>
        <div class="badges">
            {% if user.user_badges %}
                {% for user_badge in user.user_badges %}
                    <div class="badge">
                        <strong>{{ user_badge.badge.name }}</strong><br>
                        <small>{{ user_badge.badge.description }}</small><br>
                        <em>Earned on {{ user_badge.earned_date.strftime('%Y-%m-%d') }}</em>
                    </div>
                {% endfor %}
            {% else %}
                <p>No badges earned yet.</p>
            {% endif %}
        </div>
    </div>


    <div class="profile-actions">
        <a href="{{ url_for('edit_profile') }}" class="edit-button"><i class="fas fa-edit"></i> Edit Profile</a>
        <a href="{{ url_for('habits') }}" class="edit-button"><i class="fas fa-dumbbell"></i> View Habits</a>
        <a href="{{ url_for('weekly_report') }}" class="edit-button"><i class="fas fa-calendar-week"></i> Weekly Report</a>
    </div>
</div>

{% endblock %}
